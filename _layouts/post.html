---
layout: default
---
<div class="reading-progress" aria-hidden="true"></div>
<article class="post">
  <header class="post-header">
    <h1>{{ page.title }}</h1>
    <div class="post-meta">
      <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %d, %Y" }}</time>
      {% if page.category %}<a class="category-tag" href="{{ '/blog' | relative_url }}#category={{ page.category | slugify }}">{{ page.category }}</a>{% endif %}
    </div>
  </header>
  <div class="post-content">
    {{ content }}
  </div>
</article>
<div class="image-modal" aria-hidden="true" role="dialog" aria-label="Image preview">
  <button class="image-modal__close" type="button" aria-label="Close image">&times;</button>
  <img class="image-modal__img" alt="">
</div>
<script>
  (() => {
    const progress = document.querySelector(".reading-progress");
    if (!progress) return;
    const updateProgress = () => {
      const doc = document.documentElement;
      const scrollTop = window.scrollY || doc.scrollTop;
      const scrollHeight = doc.scrollHeight - window.innerHeight;
      const ratio = scrollHeight > 0 ? scrollTop / scrollHeight : 0;
      progress.style.width = `${Math.min(100, Math.max(0, ratio * 100))}%`;
    };
    updateProgress();
    window.addEventListener("scroll", updateProgress, { passive: true });
    window.addEventListener("resize", updateProgress);
  })();
</script>
<script>
  (() => {
    const modal = document.querySelector(".image-modal");
    const modalImage = modal?.querySelector(".image-modal__img");
    const closeButton = modal?.querySelector(".image-modal__close");
    if (!modal || !modalImage || !closeButton) return;

    const openModal = (img) => {
      modalImage.src = img.src;
      modalImage.alt = img.alt || "";
      modal.setAttribute("aria-hidden", "false");
      document.body.classList.add("no-scroll");
    };

    const closeModal = () => {
      modal.setAttribute("aria-hidden", "true");
      modalImage.src = "";
      document.body.classList.remove("no-scroll");
    };

    document.querySelectorAll(".post-content img").forEach((img) => {
      img.style.cursor = "zoom-in";
      img.addEventListener("click", () => openModal(img));
    });

    closeButton.addEventListener("click", closeModal);
    modal.addEventListener("click", (event) => {
      if (event.target === modal) closeModal();
    });
    window.addEventListener("keydown", (event) => {
      if (event.key === "Escape") closeModal();
    });
  })();
</script>
